(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,a){e.exports={enter:"telBook_enter__8oky1",enterActive:"telBook_enterActive__FTu4A",exit:"telBook_exit__24L1H",exitActive:"telBook_exitActive__2E52j",appear:"telBook_appear__1FLHw",appearActive:"telBook_appearActive__1NBCh",alert:"telBook_alert__1lbGM",body:"telBook_body__2imDS",title:"telBook_title__1q-fr",buttonDiv:"telBook_buttonDiv__3kMUI",button:"telBook_button__1qLe9",form:"telBook_form__2yFQk"}},48:function(e,t,a){e.exports={enter:"contactList_enter__3SYjc",enterActive:"contactList_enterActive__1ULWM",exit:"contactList_exit__1EvFP",exitActive:"contactList_exitActive__qFTpY",listItems:"contactList_listItems__1y7RL",text:"contactList_text__1DFPM"}},67:function(e,t,a){e.exports={enter:"contactListFind_enter__1bd2R",enterActive:"contactListFind_enterActive__ylZko",exit:"contactListFind_exit__3WhgT",exitActive:"contactListFind_exitActive__PHBrA"}},75:function(e,t,a){e.exports=a(96)},96:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),o=a.n(r),i=a(20),l=a(16),u=a(14),s=a(128),m=a(126),d=a(127);function p(e){var t=e.handleChange,a=e.label,n=e.name,r=e.value,o=e.type;return c.a.createElement(d.a,{type:o,value:r,name:n,id:"outlined-basic",label:a,variant:"outlined",onChange:function(e){var a=e.target.value;return t(a)}})}var b=a(18),f=a.n(b),v=a(21),h=a.n(v),E=a(31),O=a(58),j=a.n(O);j.a.initializeApp({apiKey:"AIzaSyCdD3x3iRHl4gyWIEae1bcODulmV-CURoU",authDomain:"reacthw7.firebaseapp.com",databaseURL:"https://reacthw7.firebaseio.com",projectId:"reacthw7",storageBucket:"reacthw7.appspot.com",messagingSenderId:"8842518955",appId:"1:8842518955:web:0c55ad8a595d94d88b72ee"});var g=j.a,_=function(){var e=Object(E.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,g.auth().signInWithEmailAndPassword(a,n).catch((function(e){return console.log(e.message),e.message}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(E.a)(h.a.mark((function e(t){var a,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,c=t.nickname,e.next=3,g.auth().createUserWithEmailAndPassword(a,n);case 3:return e.next=5,g.auth().currentUser;case 5:e.sent.updateProfile({displayName:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=a(68),k=a(7),w=a(44),C={contacts:{items:[],filter:""},user:{email:"",nickname:"",uid:""}},N=Object(w.b)({name:"@contacts",initialState:C,reducers:{getContacts:function(e,t){t.type;var a=t.payload;return Object(k.a)(Object(k.a)({},e),{},{contacts:Object(k.a)(Object(k.a)({},e.contacts),{},{items:a})})},addContacts:function(e,t){t.type;var a=t.payload;return Object(k.a)(Object(k.a)({},e),{},{contacts:Object(k.a)(Object(k.a)({},e.contacts),{},{items:[].concat(Object(x.a)(e.contacts.items),[a])})})},deleteContacts:function(e,t){t.type;var a=t.payload;return Object(k.a)(Object(k.a)({},e),{},{contacts:Object(k.a)(Object(k.a)({},e.contacts),{},{items:e.contacts.items.filter((function(e){return e.id!==a}))})})},filterContacts:function(e,t){t.type;var a=t.payload;return{contacts:Object(k.a)(Object(k.a)({},e.contacts),{},{filter:a})}},addRequest:function(e){return Object(k.a)(Object(k.a)({},e),{},{loading:!0})},addSuccess:function(e){return Object(k.a)(Object(k.a)({},e),{},{loading:!1})},addError:function(e){return Object(k.a)(Object(k.a)({},e),{},{loading:!1})},getUsers:function(e,t){t.type;var a=t.payload;return Object(k.a)(Object(k.a)({},e),{},{user:Object(k.a)({},a)})},logOut:function(e,t){t.type,t.payload;return Object(k.a)({},C)}}}),S=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}})),A=function(){var e=N.actions.getUsers,t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],o=a[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),b=d[0],v=d[1],h=Object(l.c)(),E=S(),O=Object(u.g)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:f.a.title},"Login form"),c.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a={email:r,password:b};_({email:r,password:b}),h(e(a)),o(""),v("")},className:E.root},c.a.createElement(p,{type:"email",value:r,name:"Email",label:"Email",handleChange:o}),c.a.createElement(p,{type:"password",value:b,name:"Password",label:"Password",handleChange:v}),c.a.createElement(s.a,{variant:"contained",color:"primary",type:"input"},"Log in")),c.a.createElement("h2",{className:f.a.title},"Dont have account? You can create it"),c.a.createElement("div",{className:f.a.buttonDiv},c.a.createElement(s.a,{variant:"contained",color:"primary",onClick:function(){return O.push({pathname:"/register"})},className:f.a.button},"Register")))},L=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}})),F=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),l=Object(i.a)(o,2),u=l[0],m=l[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),v=b[0],h=b[1],E=L();return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:f.a.title},"Register form"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),y({nickname:a,email:u,password:v}),r(""),m(""),h("")},className:E.root},c.a.createElement(p,{type:"text",value:a,name:"Nickname",label:"Nickname",handleChange:r}),c.a.createElement(p,{type:"email",value:u,name:"Email",label:"Email",handleChange:m}),c.a.createElement(p,{type:"password",value:v,name:"Password",label:"Password",handleChange:h}),c.a.createElement(s.a,{variant:"contained",color:"primary",type:"input"},"Register")))},B=a(130),D=a(129),U=a(48),I=a.n(U),P=function(e){return function(t){var a=N.actions,n=a.addRequest,c=a.addSuccess,r=a.addError;t(n());var o=g.auth().currentUser;g.firestore().collection(o.uid).doc().set(e).then((function(){t(c())})).catch((function(e){return t(r())}))}},R=function(e){return function(t){var a=N.actions,n=a.deleteContacts,c=a.addRequest,r=a.addSuccess,o=a.addError;t(c());var i=g.auth().currentUser;g.firestore().collection(i.uid).doc(e).delete().then((function(){t(n(e)),t(r())})).catch((function(e){return t(o())}))}},q=a(26),T=function(e){return e.contacts.items},W=function(e){return e.user.uid},H=Object(q.a)([T,function(e){return e.contacts.filter}],(function(e,t){return t?e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):e}));var M=Object(l.b)((function(e){return{contacts:H(e)}}))((function(e){var t=e.contacts,a=Object(l.c)();return c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{component:"ul"},t.map((function(e){return c.a.createElement(D.a,{classNames:I.a,key:e.id,timeout:250},c.a.createElement("li",{key:e.id,className:I.a.listItems},c.a.createElement("p",{className:I.a.text},e.name),c.a.createElement("p",{className:I.a.text},e.number),c.a.createElement(s.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){return a(R(e.id))}},"DELETE")))}))))})),Y=a(67),z=a.n(Y),J=N.reducer,V=Object(w.a)({reducer:J}),G=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}}));var K=Object(l.b)((function(e){return{contacts:T(e)}}))((function(e){var t=e.onChange,a=G();return c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{classNames:z.a,timeout:500,unmountOnExit:!0,in:V.getState().contacts.items.length>1},c.a.createElement(d.a,{className:a.root,id:"outlined-basic",label:"Find contacts by name",variant:"outlined",name:"filter",onChange:t})))})),Q=Object(m.a)((function(e){return{root:{"& > *":{width:"400px",display:"flex"}}}}));function Z(e){var t=Q();return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{className:t.root,style:{width:200,margin:10},id:"outlined-basic",label:e.name,variant:"outlined",name:e.name,onChange:e.onChange,value:e.value}))}var X=Object(m.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}}));var $=Object(l.b)((function(e){return{contacts:T(e)}}))((function(e){var t=e.contacts,a=Object(n.useState)(!1),r=Object(i.a)(a,2),o=r[0],u=r[1],m=Object(n.useState)(""),d=Object(i.a)(m,2),p=d[0],b=d[1],v=Object(n.useState)(""),h=Object(i.a)(v,2),E=h[0],O=h[1],j=X(),g=Object(l.c)();function _(e){var t=e.target,a=t.name,n=t.value;"name"===a?b(n):"number"===a&&O(n)}return c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{timeout:5e3,classNames:f.a,in:o},c.a.createElement("div",{className:f.a.alert},c.a.createElement("p",null,"This contact already in phonebook"))),c.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),t.find((function(e){return e.name===p}))?(u(!0),setTimeout((function(){u(!1)}),3e3),b(""),O("")):(g(P({name:p,number:E})),b(""),O(""))},className:j.root},c.a.createElement(Z,{name:"name",onChange:_,value:p}),c.a.createElement(Z,{name:"number",onChange:_,value:E}),c.a.createElement(s.a,{variant:"contained",color:"primary",type:"input"},"Add contact")))}));var ee=Object(l.b)((function(e){return{uid:W(e)}}))((function(e){var t=e.uid,a=Object(l.d)(),r=Object(l.c)(),o=N.actions,i=o.filterContacts,u=o.getContacts,m=o.logOut,d=a.getState().user.nickname,p=function(){var e=Object(E.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.firestore().collection(t).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(k.a)(Object(k.a)({},e.data()),{},{id:e.id})}));r(u(t))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p()}),[]);var b=function(){var e=Object(E.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.auth().signOut(),r(m());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{timeout:500,classNames:f.a,appear:!0,unmountOnExit:!0,in:!0},c.a.createElement("div",null,c.a.createElement(s.a,{variant:"contained",color:"primary",onClick:b},"LogOut"),c.a.createElement("h2",{className:f.a.title},"hello, ",d," "),c.a.createElement("h2",{className:f.a.title},"Phonebook"))),c.a.createElement($,null),c.a.createElement("h2",{className:f.a.title},"Contacts"),c.a.createElement(K,{onChange:function(e){return r(i(e.target.value))}}),c.a.createElement(M,null))}));var te=function(){var e=N.actions.getUsers,t=Object(l.c)(),a=Object(n.useState)(null),r=Object(i.a)(a,2),o=r[0],s=r[1];g.auth().onAuthStateChanged((function(e){s(e)})),o&&t(e({email:o.email,uid:o.uid,nickname:o.displayName}));var m=o?c.a.createElement(u.d,null,c.a.createElement(u.b,{exact:!0,path:"/contacts",component:ee}),c.a.createElement(u.a,{to:"/contacts"})):c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/login",component:A}),c.a.createElement(u.b,{path:"/register",component:F}),c.a.createElement(u.a,{to:"/login"}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:f.a.body},m))},ae=a(53);o.a.render(c.a.createElement(l.a,{store:V},c.a.createElement(ae.a,null,c.a.createElement(te,null))),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.370ce51e.chunk.js.map