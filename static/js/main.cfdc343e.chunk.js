(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{17:function(e,t,a){e.exports={enter:"telBook_enter__8oky1",enterActive:"telBook_enterActive__FTu4A",exit:"telBook_exit__24L1H",exitActive:"telBook_exitActive__2E52j",appear:"telBook_appear__1FLHw",appearActive:"telBook_appearActive__1NBCh",alert:"telBook_alert__1lbGM",error:"telBook_error__3kZNg",body:"telBook_body__2imDS",title:"telBook_title__1q-fr",buttonDiv:"telBook_buttonDiv__3kMUI",button:"telBook_button__1qLe9",form:"telBook_form__2yFQk"}},48:function(e,t,a){e.exports={enter:"contactList_enter__3SYjc",enterActive:"contactList_enterActive__1ULWM",exit:"contactList_exit__1EvFP",exitActive:"contactList_exitActive__qFTpY",listItems:"contactList_listItems__1y7RL",text:"contactList_text__1DFPM"}},67:function(e,t,a){e.exports={enter:"contactListFind_enter__1bd2R",enterActive:"contactListFind_enterActive__ylZko",exit:"contactListFind_exit__3WhgT",exitActive:"contactListFind_exitActive__PHBrA"}},75:function(e,t,a){e.exports=a(96)},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),i=a(21),l=a(13),u=a(15),s=a(18),m=a.n(s),d=a(26),p=a(128),b=a(126),f=a(127);function v(e){var t=e.handleChange,a=e.label,n=e.name,c=e.value,o=e.type;return r.a.createElement(f.a,{type:o,value:c,name:n,id:"outlined-basic",label:a,variant:"outlined",onChange:function(e){var a=e.target.value;return t(a)}})}var h=a(17),O=a.n(h),E=a(68),j=a(7),g=a(44),_={contacts:{items:[],filter:""},user:{email:"",nickname:"",uid:""}},y=Object(g.b)({name:"@contacts",initialState:_,reducers:{getContacts:function(e,t){t.type;var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},{contacts:Object(j.a)(Object(j.a)({},e.contacts),{},{items:a})})},addContacts:function(e,t){t.type;var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},{contacts:Object(j.a)(Object(j.a)({},e.contacts),{},{items:[].concat(Object(E.a)(e.contacts.items),[a])})})},deleteContacts:function(e,t){t.type;var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},{contacts:Object(j.a)(Object(j.a)({},e.contacts),{},{items:e.contacts.items.filter((function(e){return e.id!==a}))})})},filterContacts:function(e,t){t.type;var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},{contacts:Object(j.a)(Object(j.a)({},e.contacts),{},{filter:a})})},addRequest:function(e){return Object(j.a)(Object(j.a)({},e),{},{loading:!0})},addSuccess:function(e){return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:null})},addError:function(e,t){t.type;var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:a})},getUsers:function(e,t){t.type;var a=t.payload;return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)({},a)})},logOut:function(e,t){t.type,t.payload;return Object(j.a)({},_)}}}),x=a(58),k=a.n(x);k.a.initializeApp({apiKey:"AIzaSyCdD3x3iRHl4gyWIEae1bcODulmV-CURoU",authDomain:"reacthw7.firebaseapp.com",databaseURL:"https://reacthw7.firebaseio.com",projectId:"reacthw7",storageBucket:"reacthw7.appspot.com",messagingSenderId:"8842518955",appId:"1:8842518955:web:0c55ad8a595d94d88b72ee"});var w=k.a,C=Object(b.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}}));function N(){var e=y.actions,t=e.addError,a=e.addRequest,c=Object(n.useState)(""),o=Object(i.a)(c,2),s=o[0],b=o[1],f=Object(n.useState)(""),h=Object(i.a)(f,2),E=h[0],j=h[1],g=Object(l.d)(),_=Object(l.c)(),x=C(),k=Object(u.g)();function N(){return(N=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={email:s,password:E},e.next=4,S(a);case 4:b(""),j("");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(m.a.mark((function e(n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,c=n.password,_(a()),e.next=4,w.auth().signInWithEmailAndPassword(r,c).catch((function(e){return _(t(e.message)),e.message}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:O.a.title},"Login"),r.a.createElement("form",{onSubmit:function(e){return N.apply(this,arguments)},className:x.root},r.a.createElement(v,{type:"email",value:s,name:"Email",label:"Email",handleChange:b}),r.a.createElement(v,{type:"password",value:E,name:"Password",label:"Password",handleChange:j}),g.getState().error&&r.a.createElement("p",{className:O.a.error},g.getState().error),r.a.createElement(p.a,{variant:"contained",color:"primary",type:"input"},"Log in")),r.a.createElement("h2",{className:O.a.title},"Dont have account? You can create it"),r.a.createElement("div",{className:O.a.buttonDiv},r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){return k.push({pathname:"/register"})},className:O.a.button},"Register")))}var S=Object(b.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}}));function A(){var e=y.actions.addError,t=Object(l.d)(),a=Object(l.c)(),c=Object(n.useState)(""),o=Object(i.a)(c,2),u=o[0],s=o[1],b=Object(n.useState)(""),f=Object(i.a)(b,2),h=f[0],E=f[1],j=Object(n.useState)(""),g=Object(i.a)(j,2),_=g[0],x=g[1],k=S();function C(){return(C=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={nickname:u,email:h,password:_},e.next=4,N(a);case 4:s(""),E(""),x("");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(m.a.mark((function t(n){var r,c,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.email,c=n.password,o=n.nickname,t.next=3,w.auth().createUserWithEmailAndPassword(r,c).catch((function(t){a(e(t.message));var n=t.message;return console.log(n),n}));case 3:return t.next=5,w.auth().currentUser;case 5:(i=t.sent)&&i.updateProfile({displayName:o});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:O.a.title},"Register form"),r.a.createElement("form",{onSubmit:function(e){return C.apply(this,arguments)},className:k.root},r.a.createElement(v,{type:"text",value:u,name:"Nickname",label:"Nickname",handleChange:s}),r.a.createElement(v,{type:"email",value:h,name:"Email",label:"Email",handleChange:E}),r.a.createElement(v,{type:"password",value:_,name:"Password",label:"Password",handleChange:x}),t.getState().error&&r.a.createElement("p",{className:O.a.error},t.getState().error),r.a.createElement(p.a,{variant:"contained",color:"primary",type:"input"},"Register")))}var L=a(130),F=a(129),B=a(48),D=a.n(B),R=function(e){return function(t){var a=y.actions,n=a.addRequest,r=a.addSuccess,c=a.addError;t(n());var o=w.auth().currentUser;w.firestore().collection(o.uid).doc().set(e).then((function(){t(r())})).catch((function(e){return t(c())}))}},I=function(e){return function(t){var a=y.actions,n=a.deleteContacts,r=a.addRequest,c=a.addSuccess,o=a.addError;t(r());var i=w.auth().currentUser;w.firestore().collection(i.uid).doc(e).delete().then((function(){t(n(e)),t(c())})).catch((function(e){return t(o())}))}},P=a(27),U=function(e){return e.contacts.items},q=function(e){return e.user.uid},T=Object(P.a)([U,function(e){return e.contacts.filter}],(function(e,t){return t?e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):e}));var W=Object(l.b)((function(e){return{contacts:T(e)}}))((function(e){var t=e.contacts,a=Object(l.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{component:"ul"},t.map((function(e){return r.a.createElement(F.a,{classNames:D.a,key:e.id,timeout:250},r.a.createElement("li",{key:e.id,className:D.a.listItems},r.a.createElement("p",{className:D.a.text},e.name),r.a.createElement("p",{className:D.a.text},e.number),r.a.createElement(p.a,{type:"button",variant:"contained",color:"secondary",onClick:function(){return a(I(e.id))}},"DELETE")))}))))})),H=a(67),M=a.n(H),Y=y.reducer,z=Object(g.a)({reducer:Y}),J=Object(b.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}}));var V=Object(l.b)((function(e){return{contacts:U(e)}}))((function(e){var t=e.onChange,a=J();return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{classNames:M.a,timeout:500,unmountOnExit:!0,in:z.getState().contacts.items.length>1},r.a.createElement(f.a,{className:a.root,id:"outlined-basic",label:"Find contacts by name",variant:"outlined",name:"filter",onChange:t})))})),Z=Object(b.a)((function(e){return{root:{"& > *":{width:"400px",display:"flex"}}}}));function G(e){var t=Z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:t.root,style:{width:200,margin:10},id:"outlined-basic",label:e.name,variant:"outlined",name:e.name,onChange:e.onChange,value:e.value}))}var K=Object(b.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:"400px",display:"flex"}}}}));var Q=Object(l.b)((function(e){return{contacts:U(e)}}))((function(e){var t=e.contacts,a=Object(n.useState)(!1),c=Object(i.a)(a,2),o=c[0],u=c[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),d=m[0],b=m[1],f=Object(n.useState)(""),v=Object(i.a)(f,2),h=v[0],E=v[1],j=K(),g=Object(l.c)();function _(e){var t=e.target,a=t.name,n=t.value;"name"===a?b(n):"number"===a&&E(n)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{timeout:5e3,classNames:O.a,in:o},r.a.createElement("div",{className:O.a.alert},r.a.createElement("p",null,"This contact already in phonebook"))),r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),t.find((function(e){return e.name===d}))?(u(!0),setTimeout((function(){u(!1)}),3e3),b(""),E("")):(g(R({name:d,number:h})),b(""),E(""))},className:j.root},r.a.createElement(G,{name:"name",onChange:_,value:d}),r.a.createElement(G,{name:"number",onChange:_,value:h}),r.a.createElement(p.a,{variant:"contained",color:"primary",type:"input"},"Add contact")))}));var X=Object(l.b)((function(e){return{uid:q(e)}}))((function(e){var t=e.uid,a=Object(l.d)(),c=Object(l.c)(),o=y.actions,i=o.filterContacts,u=o.getContacts,s=o.logOut,b=a.getState().user.nickname,f=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.firestore().collection(t).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id})}));c(u(t))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){f()}),[]);var v=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w.auth().signOut(),c(s());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{timeout:500,classNames:O.a,appear:!0,unmountOnExit:!0,in:!0},r.a.createElement("div",null,r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:v},"LogOut"),r.a.createElement("h2",{className:O.a.title},"hello, ",b," "),r.a.createElement("h2",{className:O.a.title},"Phonebook"))),r.a.createElement(Q,null),r.a.createElement("h2",{className:O.a.title},"Contacts"),r.a.createElement(V,{onChange:function(e){return c(i(e.target.value))}}),r.a.createElement(W,null))}));var $=function(){var e=y.actions.getUsers,t=Object(l.c)(),a=Object(n.useState)(null),c=Object(i.a)(a,2),o=c[0],s=c[1];w.auth().onAuthStateChanged((function(e){s(e)})),o&&t(e({email:o.email,uid:o.uid,nickname:o.displayName}));var m=o?r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/contacts",component:X}),r.a.createElement(u.a,{to:"/contacts"})):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/login",component:N}),r.a.createElement(u.b,{path:"/register",component:A}),r.a.createElement(u.a,{to:"/login"}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:O.a.body},m))},ee=a(53);o.a.render(r.a.createElement(l.a,{store:z},r.a.createElement(ee.a,null,r.a.createElement($,null))),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.cfdc343e.chunk.js.map